<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
</head>

<body>
    <nav class="flex">
        <div class="w-full px-4 py-2">
            <h1 class="w-[max-content] text-xl font-bold text-orange-600 px-4 py-2 rounded">Mongocrm</h1>
        </div>
        <div class="w-full px-4 py-2 flex justify-end">
            <button type="button" class="hover:bg-gray-900 select-none flex rounded-xl px-4 py-2 hover:text-white">
                <span class="material-symbols-outlined">
                    code
                </span>
            </button>
        </div>
    </nav>
    <div class="p-2 flex items-center justify-center">
        <div class="px-4 py-2 space-y-2 bg-gray-100 rounded-xl">
            <div class="space-y-1">
                <label for="dbname" class="text-sm">Database</label><br>
                <input type="text" class="px-4 py-2 text-sm rounded-md" name="dbname" id="dbname"
                    placeholder="eg. MyDatabase">
            </div>
            <div class="space-y-1">
                <label for="collname" class="text-sm">Collection</label><br>
                <input type="text" class="px-4 py-2 text-sm rounded-md" name="collname" id="collname"
                    placeholder="eg. Users">
            </div>

            <div class="space-y-1">
                <label for="param" class="text-sm">Specify</label><br>
                <div class="">
                    <input type="text" class="px-4 py-2 text-sm rounded-md" placeholder="Parameter" name="param"
                        id="param">
                    <input type="text" class="px-4 py-2 text-sm rounded-md" name="param_value" id="param_value"
                        placeholder="Value">
                </div>
                <div class="p-1">
                    <button type="button"
                        class="px-4 py-2 text-sm w-full bg-blue-600 active:bg-blue-800 text-white text-center border rounded-md">Add
                        Parameter</button>
                </div>
            </div>
            <div class="w-full p-1">
                <button type="button" onclick="fetchData(event)"
                    class="px-4 py-2 rounded-md text-white disabled:opacity-[0.7] bg-orange-600 w-full text-sm active:bg-orange-800 select-none outline-none">Fetch</button>
            </div>
        </div>
    </div>

    <script>
        const dbname = document.getElementById("dbname");
        const collname = document.getElementById("collname");

        function fetchData(e) {
            e.target.disabled = true;

            if (dbname.value && collname.value) {
                fetch('/retrieve/data', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        db_name: `${dbname.value}`,
                        collection: `${collname.value}`

                    })
                }).then((response) => {
                    if (response.ok) {
                        return response.json();
                    }
                }).then((data) => {
                    console.log(data);
                })
            } else {
                alert("Enter correct values.")
            }

        }
    </script>

</body>

</html>